# 1. 브라우저 로딩 과정

VirtualDOM을 이해하기 전 브라우저의 로딩 과정에 대해 알아보자.

브라우저는 아래의 과정을 거친다

> 파싱 -> 스타일 -> 레이아웃 -> 페인트 -> 합성 -> 렌더

그 후의 JS나 CSS를 통해 DOM이나 CSS에 변화가 생길 경우 reflow혹은 repaint 등의 과정을 수행한다.

## 1. 파싱

1. HTML을 통해 DOM 객체 트리를 구성한다.
2. CSS를 해석해 CSSOM 트리를 구성한다. body, p, span 등 선택자가 노드로 생성되고 각 노드는 스타일을 참조한다.

## 2. 스타일

1. DOM Tree, CSSOM Tree가 생성되면 스타일을 매칭시켜주는 과정을 거쳐 렌더 트리를 구성한다.
2. 이때 렌더링 트리에는 페이지를 렌더링하는 데 필요한 노드만 포함된다.

## 3. 레이아웃

1. 기기의 뷰포트 내에서 노드의 정확한 위치와 크기를 계산하는 과정이다.
2. 경우에 따라 리플로우라고도 한다.
3. % 로 지정된 값은 픽셀 단위로 측정 및 계산된다.

## 4. 페인트

1. 렌더링 트리의 각 노드를 화면의 실제 픽셀로 변환하는 마지막 단계
2. 레이아웃이 완료될 때 브라우저가 Paint Setup 및 Paint 이벤트를 발생
3. 렌더링 트리를 화면의 픽셀로 변환 (레스터화리고도 한다.)
4. 위치와 관계없는 CSS속성(opacity, tranform, box-shadow 등)을 적용한다.
5. 픽셀로 변환된 결과는 포토샵의 레이어처럼 생성되어 개별 레이어로 관리

## 5. 합성

1. 화면에 표시하기 위해 페이지에 페인트된 부분을 합치는 과정
2. tranform opacity will-change 등을 사용했을 때 합성 과정을 거친다.
